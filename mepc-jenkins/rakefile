cookbook_dir = 'cookbooks/'

task :default => :clean do
  puts 'Downloading required cookbooks...'
  mkdir cookbook_dir
  `git clone https://github.com/opscode-cookbooks/apt.git #{cookbook_dir}apt/`
  `git clone https://github.com/opscode-cookbooks/ark.git #{cookbook_dir}ark/`
  `git clone https://github.com/opscode-cookbooks/git.git #{cookbook_dir}git/`
  `git clone https://github.com/opscode-cookbooks/java.git #{cookbook_dir}java/`
  cloneJenkins(cookbook_dir)
  `git clone https://github.com/opscode-cookbooks/maven.git #{cookbook_dir}maven/`
end

def cloneJenkins(cookbook_dir)
  `mkdir --parents #{cookbook_dir}jenkins/`
  `wget https://gist.github.com/gists/978920/download --output-document=#{cookbook_dir}jenkins/978920.tgz`
  `tar --verbose --extract --directory=#{cookbook_dir}jenkins/ --file=#{cookbook_dir}jenkins/978920.tgz`
  `mv #{cookbook_dir}jenkins/gist* #{cookbook_dir}jenkins/recipes/`
  rm_rf cookbook_dir + 'jenkins/978920.tgz'
end

task :cloneJenkins => :clean do
  cloneJenkins(cookbook_dir)
end

task :clean do
  puts 'Cleaning cookbooks...'
  rm_rf cookbook_dir
end
